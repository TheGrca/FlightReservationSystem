<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }

        nav {
            background-color: #000;
            color: #fff;
            padding: 10px 0;
        }

            nav ul {
                list-style-type: none;
                margin: 0;
                padding: 0;
                text-align: center;
            }

                nav ul li {
                    display: inline;
                    margin-right: 10px;
                }

                    nav ul li a {
                        text-decoration: none;
                        color: #fff;
                        padding: 10px 15px;
                    }

                        nav ul li a:hover {
                            background-color: #333;
                        }
    </style>
</head>
<body>
    <nav id="navbar">
        <ul>
            <li id="homeLink"><a href="MainPage.html">Home</a></li>
            <li id="airlinesLink"><a href="Airlines.html">Airlines</a></li>
            <li id="adminAirlines" style="display: none;"><a href="AdminAirlines.html">Edit Airlines</a></li>
            <li id="adminFlights" style="display: none;"><a href="AdminFlights.html">Edit Flights</a></li>
            <li id="reservationLink" style="display: none;"><a href="Reservations.html">My Reservations</a></li>
            <li id="adminReservation" style="display: none;"><a href="AdminReservation.html">Edit Reservations</a></li>
            <li id="reviewsLink" style="display: none;"><a href="Review.html">Leave a review</a></li>
            <li id="adminReviews" style="display: none;"><a href="AdminReviews.html">Edit Reviews</a></li>
            <li id="profileLink" style="display: none;"><a href="#">Profile</a></li>
            <li id="loginLink"><a href="Login.html">Login</a></li>
            <li id="registerLink"><a href="Register.html">Register</a></li>
            <li id="logoutLink" style="display: none;"><a href="#">Logout</a></li>
        </ul>
    </nav>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        var userType;
        $(document).ready(function () {
        var isLoggedIn = sessionStorage.getItem("LoggedInUser") !== null; // Replace with actual check
    
            var userUsername = sessionStorage.getItem("LoggedInUser")
                if (userUsername) {
                    $.ajax({
                        type: "GET",
                        url: "/api/users/" + userUsername,
                        success: function (response) {
                            $("#userType").text(response.TypeOfUser);
                            // Now that the AJAX call is complete, handle userType here
                           userType = response.TypeOfUser;
                            console.log("User Type: " + userType);
                            updateNavbar(isLoggedIn);
                        },
                        error: function (xhr) {
                            console.error("Error fetching user:", xhr.statusText);
                        }
                    });
                } else {
                    console.log("User not logged in");
                    updateNavbar(isLoggedIn);
                }

            
            

            // Function to update navbar based on login state
            function updateNavbar(loggedIn) {
                if (loggedIn && userType == "1") {
                    // Hide login and register, show profile and logout
                    $("#homeLink").hide();
                    $("#airlinesLink").hide();
                    $("#loginLink").hide();
                    $("#registerLink").hide();
                    $("#logoutLink").show();
                    $("#profileLink").show();
                    $("#adminAirlines").show();
                    $("#adminFlights").show();
                    $("#adminReservation").show();
                    $("#adminReviews").show();
                    var username = sessionStorage.getItem("LoggedInUser");
                    $("#profileLink a").text(username);
                    $("#profileLink a").attr("href", "Profile.html");
                } 
                else if (loggedIn && userType == "0") {
                    $("#homeLink").show();
                    $("#airlinesLink").show();
                    $("#loginLink").hide();
                    $("#registerLink").hide();
                    $("#logoutLink").show();
                    $("#profileLink").show();
                    $("#reservationLink").show();
                    $("#reviewsLink").show();
                    var username = sessionStorage.getItem("LoggedInUser");
                    $("#profileLink a").text(username);
                    $("#profileLink a").attr("href", "Profile.html"); // Replace with actual link

                } else {
                    // Show login and register, hide profile and logout
                    $("#homeLink").show();
                    $("#airlinesLink").show();
                    $("#loginLink").show();
                    $("#registerLink").show();
                    $("#logoutLink").hide();
                    $("#profileLink").hide();
                    $("#reservationLink").hide();
                    $("#reviewsLink").hide();
                    $("#adminAirlines").hide();
                    $("#adminFlights").hide();
                    $("#adminReservation").hide();
                    $("#adminReviews").hide();
                }
            }

            // Example logout functionality
            $("#logoutLink").on("click", function (e) {
                e.preventDefault();
                sessionStorage.removeItem("LoggedInUser");
                updateNavbar(false);
                window.location.href = "MainPage.html";
            });

            // Example: Clicking profile link (only shown when logged in)
            $("#profileLink").on("click", function (e) {
                e.preventDefault();
                // Redirect to profile page
                window.location.href = "Profile.html"; // Replace with actual profile page link
            });
        });</script>
</body>
</html>